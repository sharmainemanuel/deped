<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Home </title>
    <link rel="stylesheet" href="font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="css/compiled.min.css" rel="stylesheet">
</head>

<body class="hidden-sn mdb-skin">

    <!--Double navigation-->
    <header>
        <!-- Sidebar navigation -->
        <ul id="slide-out" class="side-nav sn-bg-1 custom-scrollbar ">
            <!-- Logo -->
            <li>
                <div class="logo-wrapper waves-light">
                    <a href="#"><img src="img/ictulogo2.png" class="img-fluid flex-center"></a>
                </div>
            </li>
            <!--/. Logo -->

            <!--Search Form-->
            <li style="visibility: hidden;">
                <form class="search-form" role="search">
                    <div class="form-group waves-light">
                        <input type="text" class="form-control" placeholder="Search">
                    </div>
                </form>
            </li>
            <!--/.Search Form-->
            <!-- Side navigation links -->
            <li style="visibility: hidden;">
                <ul class="collapsible collapsible-accordion">
                    <li><a class="collapsible-header waves-effect arrow-r"><i class="fa fa-chevron-right"></i> Request<i class="fa fa-angle-down rotate-icon"></i></a>
                        <div class="collapsible-body">
                            <ul>
                                <li><a href="#" class="waves-effect">Submit Request</a>
                                </li>
                                <li><a href="#" class="waves-effect">Request History</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
            <!--/. Side navigation links -->
            <div class="sidenav-bg mask-strong"></div>
        </ul>
        <!--/. Sidebar navigation -->
        <!-- Navbar -->
        <nav class="navbar fixed-top navbar-toggleable-md navbar-expand-lg scrolling-navbar double-nav danger-color-dark">
            <!-- SideNav slide-out button -->
            <div class="float-left">
                <a href="#" data-activates="slide-out" class="button-collapse"><i class="fa fa-bars"></i></a>
            </div>
            <!-- Breadcrumb-->
         
            <ul class="nav navbar-nav nav-flex-icons ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html"><i class="fa fa-sign-out"></i> <span class="clearfix d-none d-sm-inline-block">Sign Out</span></a>
                </li>
            </ul>
        </nav>
        <!-- /.Navbar -->
    </header>
    <!--/.Double navigation-->
    
    <!--Main Layout-->
    <main>
        <div class="container-fluid mt-5">
            <div class="card">
                <!--Card content-->
                <div class="card-body">
                    <!--Title-->
                    <h4 class="card-title">Request Form</h4>
                    <hr>
                    <form id="issue_form">
                        <p class="text-left mb-4">Please Be Patient Filling <i class="fa fa-smile-o" aria-hidden="true"></i></p>
                        <div class="md-form">
                            <i class="fa fa-user prefix grey-text"></i>
                            <input type="text" id="job-order" class="form-control" readonly="">
                           
                        </div>

                        <div class="md-form">
                            <i class="fa fa-envelope prefix grey-text"></i>
                            <input type="text" id="requested-by" class="form-control">
                            <label for="requested-by">Requested By *</label>
                        </div>

                        <div class="md-form">
                            <i class="fa fa-tag prefix grey-text"></i>      
                            <input list="office2" id="office"  class="form-control" placeholder="Office *">
                            <datalist id="office2">
                              <option value="Office of the SDS">Office of the SDS
                              <option value="Curriculum Implementation Division ">Office of the SDS
                              <option value="School Governance and Operations Division">School Governance and Operations Division
                              <option value="Information, Communication and Technology Unit">Information, Communication and Technology Unit
                              <option value="Schools">Schools
                            </datalist>
                        
                        </div>
                                 <div class="md-form school">
                            <i class="fa fa-building prefix grey-text"></i>      
                            <input list="school2" id="school"  class="form-control">
                            <datalist id="school2">
                              <option value="Amelia Heights ES">Amelia Heights ES
                              <option value="Asinan ES">Asinan ES
                              <option value="Balic-Balic ES">Balic-Balic ES
                              <option value="Bangal ES">Bangal ES
                              <option value="Banicain ES">Banicain ES
                            </datalist>
                            <label for="school">Schools *</label>
                        </div>
                        <div class="md-form">
                            <i class="fa fa-calendar prefix grey-text"></i>
                            <input placeholder="Date Started *" type="text" id="date-started" class="form-control datepicker">
      
                        </div>
                        <div class="md-form">
                            <i class="fa fa-clock-o prefix grey-text"></i>
                            <input placeholder="Time Started *" type="text" id="time-started" class="form-control timepicker">
                        </div>
                        <div class="md-form">

                            <select class="mdb-select" id="issues">
                                <option value="" disabled selected>Issues</option>
                                <option value="Software">SOFTWARE</option>
                                <option value="Hardware">HARDWARE</option>
                                <option value="Network">NETWORK</option>
                                <option value="Misc">MISC</option>
                            </select>
                         </div>
                         <div class="md-form">
                                                    <div id="issues_software" style="display: none;">
                                                    SOFTWARE
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" id="check1" value="Startup/Shutting Down">
                                                            <label for="check1"> Startup / Shutting Down</label>
                                                        </fieldset>
                                                         <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" id="check2" value="OS">
                                                            <label for="check2"> Operating System</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" id="check3" value="System Software">
                                                            <label for="check3"> System Software</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" id="check4" value="Device Software Drivers">
                                                            <label for="check4"> Device Software Drivers</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" id="check5" value="Anti Viruses">
                                                            <label for="check5"> Anti Viruses</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" id="check6" value="Installation">
                                                            <label for="check6"> Installation/ Updates</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" id="check7" value="File(s)">
                                                            <label for="check7"> File(s)/ Data(s)</label>
                                                        </fieldset>
                                                    </div>
                                                     
                                                     <div id="issues_hardware" style="display: none">
                                                     HARDWARE
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" value="PC,Laptop and Hardware" id="check8">
                                                            <label for="check8">PC,Laptop and Hardware</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" value="Input/ Output Error" id="check9">
                                                            <label for="check9">Input/ Output Error</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" value="Hardware Error" id="check10">
                                                            <label for="check10">Hardware Error</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" value="Printer Error" id="check11">
                                                            <label for="check11">Printer Error</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox" name="issues" value="Connector/ Power / Plug Problem(s)" id="check12">
                                                            <label for="check12">Connector/ Power / Plug Problem(s)</label>
                                                        </fieldset>
                                                    </div>
                                                      
                                                      <div id="issues_network" style="display: none">
                                                    NETWORK
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="LAN Setup/ Config."   name="issues" id="check13">
                                                            <label for="check13">LAN Setup/ Config.</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="Router/ WIFI Setup/ Config."   name="issues" id="check14">
                                                            <label for="check14">Router/ WIFI Setup/ Config.</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"    value="Internet Problem"  name="issues" id="check15">
                                                            <label for="check15">Internet Problem</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="Printer Sharing"   name="issues" id="check16">
                                                            <label for="check16">Printer Sharing</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="Cable Issue"   name="issues" id="check17">
                                                            <label for="check17">Cable Issue</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"    value="NAS Problem"  name="issues" id="check18">
                                                            <label for="check18">NAS Problem</label>
                                                        </fieldset>
                                                    </div>
                                                     
                                                     <div id="issues_misc" style="display: none;">
                                                         MISC
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="USB Drive Care"   name="issues" id="check19">
                                                            <label for="check19">USB Drive Care</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="Print Job"   name="issues" id="check20">
                                                            <label for="check20">Print Job</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="Technical Assistance"   name="issues" id="check21">
                                                            <label for="check21">Technical Assistance</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="Layout"   name="issues" id="check22">
                                                            <label for="check22">Layout</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"    value="Web Updates"  name="issues" id="check23">
                                                            <label for="check23">Web Updates</label>
                                                        </fieldset>
                                                        <fieldset class="form-group">
                                                            <input type="checkbox"   value="Email Problem(s)"   name="issues" id="check24">
                                                            <label for="check24">Email Problem(s)</label>
                                                        </fieldset>
                                                    </div>
                                                </div>
                                                <div class="md-form">
                                                    <i class="fa fa-warning prefix grey-text"></i>
                                                    <textarea id="issue-1" class="md-textarea" length="120"></textarea>
                                                    <label for="issue-1">Main Issue *</label>
                                                </div>
                                                <div class="md-form">
                                                    <i class="fa fa-warning prefix grey-text"></i>
                                                    <textarea id="issue-2" class="md-textarea" length="120"></textarea>
                                                    <label for="issue-2">Other Issue *</label>
                                                </div>

                                                <div class="md-form">
                                                   <i class="fa fa-user-circle prefix grey-text"></i>
                                                    <input type="text" id="client" class="form-control">
                                                    <label for="client">Client *</label>
                                                </div>

                        <div class="text-center">
                            <button class="btn btn-unique" id="btnsubmit">Submit <i class="fa fa-paper-plane-o ml-1"></i></button>
                        </div>

                    </form>
                </div>
                <!--/.Card content-->

            

            </div>
        </div>
    </main>
    <!--Main Layout-->
    
    <!-- SCRIPTS -->
    <!-- JQuery -->
    <script type="text/javascript" src="js/compiled.min.js"></script>
    <script>
        $(document).ready(function(){
            office();
            getId();
          
        });



function office(){
        $('.school').hide();
         $('#office').change(function(){
            var office = $('#office').val();

            console.log(office);
            if (office == 'Schools'){
                $('.school').show();
            }

        });

}

function getId(){
        $.ajax({
        url:"https://johnrayopulento.000webhostapp.com/deped/getJobId.php",
        dataType:"json",
        method:"GET",
        success:function(response){
			alert(response);
            var data ="";
			var prevJobOrder= "";
			var newJobOrder = ""; 
            for(i=0;i<response.length;i++){
				prevJobOrder = parseInt(response[i].fld_jobOrder);
				newJobOrder = prevJobOrder +1;
				data += response[i].fld_jobOrder;
            }
            //$('#job-order').html(data)
			$('#job-order').val(newJobOrder);
            console.log(newJobOrder)
			alert("Job Order No:" +newJobOrder);
			
        },
        error:function(req, status, err){
            console.log(err)
			alert(req + status + err);
            
        }
    })
}


         $('.mdb-select').change(function(){
           var issue =  $( ".mdb-select option:selected" ).text();
           console.log(issue);
           var data="";
            if(issue == "SOFTWARE"){
                $('#issues_software').css("display", "block");  
                $('#issues_hardware').css("display", "none");
                $('#issues_network').css("display", "none");
                $('#issues_misc').css("display", "none");  
            }
            else if(issue == "HARDWARE"){
                $('#issues_hardware').css("display", "block");
                $('#issues_software').css("display", "none"); 
                $('#issues_network').css("display", "none");
                $('#issues_misc').css("display", "none");        
            }
            else if(issue == "NETWORK"){
                $('#issues_network').css("display", "block");
                $('#issues_hardware').css("display", "none");
                $('#issues_software').css("display", "none");
                $('#issues_misc').css("display", "none");  
            }
              else if(issue == "MISC"){
                $('#issues_misc').css("display", "block");
                $('#issues_hardware').css("display", "none");
                $('#issues_software').css("display", "none");
                $('#issues_network').css("display", "none");  
            }
            else{
              // alert(issue); 
            }

        
        });

        // SideNav Initialization
         $('.mdb-select').material_select();
        $('#time-started').pickatime({
                twelvehour: true
            });
        $('.datepicker').pickadate({
            today:'',
            clear:'',
            close: 'Close',
            format: 'yyyy-mm-dd'
        });
        $(".button-collapse").sideNav();





         $('#btnsubmit').click(function(){

            //var issues = $('#issues[]').val();
                var yourArray = [];
            $("input:checkbox[name='issues']:checked").each(function(){
            yourArray.push($(this).val());
            });
            // console.log(yourArray);
            var job_order = $('#job-order').val();
            var requested_by = $('#requested-by').val();
            var office = $('#office').val();
            var date_started = $('#date-started').val();  
            var issue_cat = $('#issues').val();    
            var main_issue = $('#issue-1').val();
            var other_issue = $('#issue-2').val();
            var client = $('#client').val();
            var school = $('#school').val();


            var formValues = $("#issue_form").serialize();
            console.log(formValues);
            var jsonString = JSON.stringify(yourArray);
            console.log(jsonString)
            $.ajax({
                url: "https://johnrayopulento.000webhostapp.com/deped/insert.php?issues="+yourArray,
                method: "POST",
                data:{job_order: job_order, requested_by: requested_by, office:  office, issue_cat: issue_cat, main_issue: main_issue, other_issue: other_issue , client: client, school: school
                 },
                success: function(result){
                    alert(result);
                    //location.reload();
                    location.reload();
                },
                error: function(req, status, err){
                    alert("errror" +req + status + err);
                   location.reload();
                    // alert("THERE IS SOME ERROR");
                }
         
            })
         
        });
    </script>
</body>

</html>